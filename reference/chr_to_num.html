<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="chr_to_num() cleans strings representing numeric values. It is tailored for
use with the ML in HCT dataset; use with other data may not go as expected."><title>Clean and Possibly Convert Numbers in character Representation — chr_to_num • dmhct</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean and Possibly Convert Numbers in character Representation — chr_to_num"><meta property="og:description" content="chr_to_num() cleans strings representing numeric values. It is tailored for
use with the ML in HCT dataset; use with other data may not go as expected."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dmhct</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jesse-smith/dmhct/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Clean and Possibly Convert Numbers in <code>character</code> Representation</h1>
      <small class="dont-index">Source: <a href="https://github.com/jesse-smith/dmhct/blob/HEAD/R/utils-chr_to_num.R" class="external-link"><code>R/utils-chr_to_num.R</code></a></small>
      <div class="d-none name"><code>chr_to_num.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>chr_to_num()</code> cleans strings representing numeric values. It is tailored for
use with the ML in HCT dataset; use with other data may not go as expected.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">chr_to_num</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  std <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  warn <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  convert <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na <span class="op">=</span> <span class="va">na_patterns</span>,</span>
<span>  replace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MRD BY NGS ?"</span>, <span class="st">"^NEGATIVE$"</span>,</span>
<span>    <span class="st">"^(?:WE[EA]KLY )?POSITIVE$"</span>, <span class="st">".*\\bIN CR\\b.*"</span><span class="op">)</span>, replacement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"0"</span>, <span class="st">"&gt;0"</span>,</span>
<span>    <span class="st">"0"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  per_action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"drop"</span>, <span class="st">"divide"</span>, <span class="st">"ignore"</span><span class="op">)</span>,</span>
<span>  multiple_decimals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"use_first"</span>, <span class="st">"use_last"</span>, <span class="st">"ignore"</span><span class="op">)</span>,</span>
<span>  donor_host <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"use_donor"</span>, <span class="st">"use_host"</span>, <span class="st">"ignore"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A <code>character</code> vector</p></dd>


<dt>std</dt>
<dd><p>Whether to standardize the vector before cleaning and converting</p></dd>


<dt>convert</dt>
<dd><p>Whether to actually convert to <code>numeric</code></p></dd>


<dt>na</dt>
<dd><p>Regular expressions to convert to <code>NA</code></p></dd>


<dt>replace</dt>
<dd><p>A <code>data.frame</code> of regular expressions and strings to replace
them; regular expression should be in a column named <code>pattern</code>, and
replacements should be in a column named <code>replacement</code>. Each row is passed
to <code><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">stringr::str_replace()</a></code>.</p></dd>


<dt>per_action</dt>
<dd><p>How to treat %/percent/per million/etc labels. <code>drop</code> simply
removes the labels, <code>divide</code> divides the value by the appropriate denominator,
and <code>ignore</code> does nothing.</p></dd>


<dt>multiple_decimals</dt>
<dd><p>How to handle multiple decimals within a number</p></dd>


<dt>donor_host</dt>
<dd><p>Which value to use when values for both a donor and a host
are given</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>numeric</code> or <code>character</code> vector, depending on the value of <code>convert</code></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function first converts strings matching <code>na_patterns</code> to missing values.
It then simplifies any numeric representations it finds, including 10^x and
various common typos observed in the data (unneeded decimals, commas, and zeros).
Additionally, it converts Excel datetimes of the form 1/x/1900 hh:mm back to
decimal representation, and additionally converts fractions less than 1 to
decimals. Lastly, it handles a few idiosyncratic text strings, including
conversion of POSITIVE and NEGATIVE values, as well as W(E|A)KLY POSITIVE
and IN CR (complete remission). Optionally, it will extract values labelled as
donor or host (patient), which is specific to the chimerism dataset. It also
removes the leading text MRD BY NGS. By default, the function emits a warning
when potential numeric values are not able to be converted to <code>numeric</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jesse Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

