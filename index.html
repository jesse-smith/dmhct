<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Extracts, Loads, and Transforms data from the SQL Server containing
    HCT data to a `dm` object with cleaned tables.">
<title>A Data Model Package for the MLinHCT Project • dmhct</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Data Model Package for the MLinHCT Project">
<meta property="og:description" content="Extracts, Loads, and Transforms data from the SQL Server containing
    HCT data to a `dm` object with cleaned tables.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dmhct</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jesse-smith/dmhct/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dmhct">dmhct<a class="anchor" aria-label="anchor" href="#dmhct"></a>
</h1></div>
<!-- badges: start -->
<p><a href="https://github.com/jesse-smith/dmhct" class="external-link">dmhct</a> extracts, loads, and transforms data for the MLinHCT project. The main functionality is wrapped into a single function, <code><a href="reference/dm_elt.html">dm_elt()</a></code>, that produces a <code>dm</code> object (from the <a href="https://cynkra.github.io/dm/" class="external-link"><code>{dm}</code> package</a>) containing cleaned data tables from an SQL Server database.</p>
<div class="section level2">
<h2 id="installation-and-setup">Installation and Setup<a class="anchor" aria-label="anchor" href="#installation-and-setup"></a>
</h2>
<p>You can install <a href="https://github.com/jesse-smith/dmhct" class="external-link">dmhct</a> from Github with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jesse-smith/dmhct"</span><span class="op">)</span></span></code></pre></div>
<p>To use the package, you will need access to the SQL Server instance containing the data. This is provided by St. Jude IT; contact <a href="mailto:jesse.smith@stjude.org">Jesse Smith</a> to learn how to gain access.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The main functionality in the package is in <code><a href="reference/dm_elt.html">dm_elt()</a></code>; this function combines two sub-functions, <code><a href="reference/dm_extract.html">dm_extract()</a></code> and <code><a href="reference/dm_transform.html">dm_transform()</a></code>, into a small pipeline.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jesse-smith/dmhct" class="external-link">dmhct</a></span><span class="op">)</span></span>
<span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dm_elt.html">dm_elt</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="va">dm2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dm_extract.html">dm_extract</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/dm_transform.html">dm_transform</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">dm</span>, <span class="va">dm2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>The <code><a href="reference/dm_extract.html">dm_extract()</a></code> function is itself a wrapper for a pipeline used to extract the necessary data from the SQL Server and load it onto your local machine. The <code><a href="reference/dm_transform.html">dm_transform()</a></code> function provides a second pipeline that cleans each table in the database and outputs tables ready for analysis (as <a href="https://rdatatable.gitlab.io/data.table/" class="external-link"><code>data.table</code>s</a>).</p>
<p>Both functions cache their results by default and compare a checksum of their inputs to a cached checksum to determine whether re-calculation is necessary. This allows the functions to simply read the cached outputs, rather than repeat costly computations, if the input is unchanged. Each function also allows the user to force re-computation and cache overwriting via a <code>reset</code> argument. This caching behavior (and the control arguments) are made available in the <code><a href="reference/dm_elt.html">dm_elt()</a></code> wrapper as well.</p>
</div>
<div class="section level2">
<h2 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h2>
<p>The data used in the project consists of 10 tables:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">dm</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fl">3L</span><span class="op">]</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt;                Length Class     </span></span>
<span><span class="co">#&gt; hla            14     data.table</span></span>
<span><span class="co">#&gt; master         26     data.table</span></span>
<span><span class="co">#&gt; cerner          5     data.table</span></span>
<span><span class="co">#&gt; chimerism       5     data.table</span></span>
<span><span class="co">#&gt; death          10     data.table</span></span>
<span><span class="co">#&gt; disease_status  4     data.table</span></span>
<span><span class="co">#&gt; engraftment     5     data.table</span></span>
<span><span class="co">#&gt; gvhd            5     data.table</span></span>
<span><span class="co">#&gt; mrd             5     data.table</span></span>
<span><span class="co">#&gt; relapse         4     data.table</span></span></code></pre></div>
<p>The entry point to this data is the <code>master</code> table, which contains one row per patient and includes baseline variables such as transplant date, patient demographics, and donor characteristics. It also contains unique IDs for patients (<code>entity_id</code>) and donors (<code>donor_id</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">skimr</span><span class="fu">::</span><span class="fu">skim</span><span class="op">(</span><span class="va">dm</span><span class="op">$</span><span class="va">master</span>, <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dm</span><span class="op">$</span><span class="va">master</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"entity_id"</span>, <span class="st">"donor_id"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span></code></pre></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">dm$master</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">852</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">26</td>
</tr>
<tr class="even">
<td align="left">Key</td>
<td align="left">entity_id</td>
</tr>
<tr class="odd">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">character</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Date</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">factor</td>
<td align="left">13</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody></table>
<p>Data summary</p>
<p><strong>Variable type: character</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">cat_donor_relation</td>
<td align="right">285</td>
<td align="right">0.67</td>
<td align="right">4</td>
<td align="right">11</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">0</td>
</tr></tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">dt_trans</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2000-01-15</td>
<td align="left">2022-09-06</td>
<td align="left">2012-02-02</td>
<td align="right">807</td>
</tr></tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cat_degree_match06</td>
<td align="right">62</td>
<td align="right">0.93</td>
<td align="left">TRUE</td>
<td align="right">4</td>
<td align="left">6: 499, 3: 138, 4: 83, 5: 70</td>
</tr>
<tr class="even">
<td align="left">cat_degree_match08</td>
<td align="right">230</td>
<td align="right">0.73</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">8: 340, 4: 116, 5: 85, 7: 43</td>
</tr>
<tr class="odd">
<td align="left">cat_degree_match10</td>
<td align="right">234</td>
<td align="right">0.73</td>
<td align="left">TRUE</td>
<td align="right">6</td>
<td align="left">10: 320, 6: 86, 5: 82, 7: 53</td>
</tr>
<tr class="even">
<td align="left">cat_disease_status_at_trans</td>
<td align="right">188</td>
<td align="right">0.78</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">Rem: 411, Act: 179, Rel: 74</td>
</tr>
<tr class="odd">
<td align="left">cat_donor_race</td>
<td align="right">182</td>
<td align="right">0.79</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">Whi: 434, Bla: 146, Oth: 90</td>
</tr>
<tr class="even">
<td align="left">cat_donor_sex</td>
<td align="right">43</td>
<td align="right">0.95</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Mal: 419, Fem: 390</td>
</tr>
<tr class="odd">
<td align="left">cat_dx_grp</td>
<td align="right">10</td>
<td align="right">0.99</td>
<td align="left">FALSE</td>
<td align="right">9</td>
<td align="left">AML: 283, ALL: 267, Oth: 94, Apl: 58</td>
</tr>
<tr class="even">
<td align="left">cat_ethnicity</td>
<td align="right">8</td>
<td align="right">0.99</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Not: 669, His: 175</td>
</tr>
<tr class="odd">
<td align="left">cat_matched_related</td>
<td align="right">368</td>
<td align="right">0.57</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">mis: 177, mat: 149, mat: 127, mis: 31</td>
</tr>
<tr class="even">
<td align="left">cat_prep_type</td>
<td align="right">224</td>
<td align="right">0.74</td>
<td align="left">TRUE</td>
<td align="right">3</td>
<td align="left">Mye: 373, Red: 219, Non: 36</td>
</tr>
<tr class="odd">
<td align="left">cat_product_type</td>
<td align="right">4</td>
<td align="right">1.00</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Mar: 481, PBS: 367, Cor: 0, Mar: 0</td>
</tr>
<tr class="even">
<td align="left">cat_race</td>
<td align="right">1</td>
<td align="right">1.00</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">Whi: 597, Bla: 165, Oth: 89</td>
</tr>
<tr class="odd">
<td align="left">cat_sex</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Mal: 487, Fem: 365</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">lgl_death</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.35</td>
<td align="left">FAL: 551, TRU: 301</td>
</tr>
<tr class="even">
<td align="left">lgl_donor_related</td>
<td align="right">285</td>
<td align="right">0.67</td>
<td align="right">0.58</td>
<td align="left">TRU: 328, FAL: 239</td>
</tr>
<tr class="odd">
<td align="left">lgl_malignant</td>
<td align="right">10</td>
<td align="right">0.99</td>
<td align="right">0.78</td>
<td align="left">TRU: 657, FAL: 185</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">num_age</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9.61</td>
<td align="right">5.98</td>
<td align="right">0.07</td>
<td align="right">4.19</td>
<td align="right">9.77</td>
<td align="right">14.97</td>
<td align="right">20.88</td>
<td align="left">▇▆▆▇▅</td>
</tr>
<tr class="even">
<td align="left">num_age_donor</td>
<td align="right">49</td>
<td align="right">0.94</td>
<td align="right">28.06</td>
<td align="right">12.64</td>
<td align="right">0.60</td>
<td align="right">20.02</td>
<td align="right">28.19</td>
<td align="right">37.71</td>
<td align="right">65.72</td>
<td align="left">▃▇▇▅▁</td>
</tr>
<tr class="odd">
<td align="left">num_dt_trans</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2011.78</td>
<td align="right">6.65</td>
<td align="right">2000.04</td>
<td align="right">2005.71</td>
<td align="right">2012.09</td>
<td align="right">2017.87</td>
<td align="right">2022.68</td>
<td align="left">▆▇▆▆▇</td>
</tr>
<tr class="even">
<td align="left">num_n_trans</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="left">▁▁▇▁▁</td>
</tr>
<tr class="odd">
<td align="left">num_t_surv</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2342.64</td>
<td align="right">2410.06</td>
<td align="right">-48.00</td>
<td align="right">271.75</td>
<td align="right">1283.00</td>
<td align="right">4044.00</td>
<td align="right">8216.00</td>
<td align="left">▇▂▂▂▁</td>
</tr>
<tr class="even">
<td align="left">num_t_trans</td>
<td align="right">11</td>
<td align="right">0.99</td>
<td align="right">692.43</td>
<td align="right">1060.01</td>
<td align="right">16.00</td>
<td align="right">123.00</td>
<td align="right">232.00</td>
<td align="right">748.00</td>
<td align="right">6668.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<p>All tables are keyed by one or more columns that are (jointly) unique to each row. Each table contains <code>entity_id</code> as a primary key; most tables except <code>master</code> then define additional keys specific to the data contained in that table (for example, many tables contain repeated observations for a patient and thus add a <code>date</code> key).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dm</span><span class="fu">::</span><span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_get_all_pks.html" class="external-link">dm_get_all_pks</a></span><span class="op">(</span><span class="va">dm</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pk_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">pk_col</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span><span class="co">#&gt;    table          pk_col                      </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;                       </span></span>
<span><span class="co">#&gt;  1 hla            entity_id, donor_id         </span></span>
<span><span class="co">#&gt;  2 master         entity_id                   </span></span>
<span><span class="co">#&gt;  3 cerner         entity_id, test, date, n_obs</span></span>
<span><span class="co">#&gt;  4 chimerism      entity_id, date, cat_source </span></span>
<span><span class="co">#&gt;  5 death          entity_id, n_id             </span></span>
<span><span class="co">#&gt;  6 disease_status entity_id, date, n_status   </span></span>
<span><span class="co">#&gt;  7 engraftment    entity_id, date             </span></span>
<span><span class="co">#&gt;  8 gvhd           entity_id, date, cat_site   </span></span>
<span><span class="co">#&gt;  9 mrd            entity_id, date             </span></span>
<span><span class="co">#&gt; 10 relapse        entity_id, date</span></span></code></pre></div>
<p>Here’s a list of data (non-key) columns in each table (excluding <code>master</code>):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu">dm</span><span class="fu">::</span><span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_select_tbl.html" class="external-link">dm_select_tbl</a></span><span class="op">(</span><span class="va">dm</span>, <span class="op">-</span><span class="st">"master"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu">dm</span><span class="fu">::</span><span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_select_tbl.html" class="external-link">dm_select_tbl</a></span><span class="op">(</span><span class="va">dm</span>, <span class="op">-</span><span class="st">"master"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">key</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; Upgrading dm object created with dm &lt;= 0.3.0.</span></span>
<span><span class="co">#&gt; # A tibble: 9 × 2</span></span>
<span><span class="co">#&gt;   table          cols                                                           </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;                                                          </span></span>
<span><span class="co">#&gt; 1 hla            n06, n08, n10, a, b, drb1, c, dqb1, dpb1, drb345, dqa1, dpa1   </span></span>
<span><span class="co">#&gt; 2 cerner         result                                                         </span></span>
<span><span class="co">#&gt; 3 chimerism      cat_method, pct_donor                                          </span></span>
<span><span class="co">#&gt; 4 death          dt_death, dt_trans, lgl_on_therapy, cat_death_location, cat_de…</span></span>
<span><span class="co">#&gt; 5 disease_status disease_status                                                 </span></span>
<span><span class="co">#&gt; 6 engraftment    recovery_anc500, recovery_plat20k, recovery_plat50k            </span></span>
<span><span class="co">#&gt; 7 gvhd           cat_grade, cat_type                                            </span></span>
<span><span class="co">#&gt; 8 mrd            cat_method, pct_result, lgl_result                             </span></span>
<span><span class="co">#&gt; 9 relapse        lgl_remission, dt_remission</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>You can find code generating results for each table in a corresponding file named <code>"dm_[table-name]"</code>. Changes should not be committed directly to the <code>main</code> branch; going forward, all changes should be made in a feature/bug fix/etc. branch and reviewed by another team member before merging. The Github repository is set up to dis-allow pushing direct commits to <code>main</code>.</p>
</div>
<div class="section level2">
<h2 id="using-with-predhct">Using with <code>{predHCT}</code>
<a class="anchor" aria-label="anchor" href="#using-with-predhct"></a>
</h2>
<p><a href="https://github.com/jesse-smith/dmhct" class="external-link">dmhct</a> was created to de-couple data cleaning code from modeling code for the MLinHCT project. However, it is a required dependency for the main modeling package, <code>{predHCT}</code>. While it is possible to install your local development version for use with <code>{predHCT}</code>, this is not recommended. Instead, please install from the <code>main</code> Github branch using the installation instructions at the beginning of this document.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jesse-smith/dmhct/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jesse-smith/dmhct/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dmhct</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jesse Smith <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jesse-smith/dmhct/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jesse-smith/dmhct/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jesse Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
